(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b9da510a"],{"37e2":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"center"},[a("div",{staticClass:"left"},[a("div",{staticClass:"head"},[null!=e.UserInfo.avatar?a("img",{attrs:{src:e.UserInfo.avatar,alt:""}}):a("img",{attrs:{src:s("4c45"),alt:""}})])]),a("div",{staticClass:"right"},[a("p",{staticClass:"name"},[e._v(e._s(e.UserInfo.nickname))]),a("p",{staticClass:"signatures"},[e._v(e._s(e.UserInfo.sign))]),a("div",{staticClass:"tab"},[""!=e.UserInfo.gender?a("el-tag",{attrs:{size:"small"}},[e._v(e._s(e.UserInfo.gender))]):e._e(),""!=e.UserInfo.school.school?a("el-tag",{attrs:{size:"small"}},[e._v(e._s(e.UserInfo.school.school))]):e._e(),""!=e.UserInfo.industry?a("el-tag",{attrs:{size:"small"}},[e._v(e._s(e.UserInfo.industry))]):e._e()],1)])]),a("div",{staticClass:"link_header lightest-bg"},[e._v("消息中心")]),a("div",{staticClass:"datasete"},[a("div",{staticClass:"editor assistant-text"},[e._v("编辑个人资料")]),a("div",{staticClass:"editorHeader"},[a("span",[e._v("头像编辑")]),a("div",{staticClass:"headImgback"}),a("div",{staticClass:"pic-wrapper"},[a("img",{attrs:{src:e.pic}})]),a("a",{staticClass:"file",attrs:{href:"javascript:void(0)"}},[e._v("\n        选择文件\n        "),a("input",{attrs:{type:"file",name:"select-pic",id:"select-pic",accept:"image/*"},on:{change:e.previewPic}})])]),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px","label-position":e.labelPosition}},[a("el-form-item",{staticClass:"name",attrs:{label:"昵称",prop:"name"}},[a("el-col",{attrs:{span:15}},[a("el-input",{attrs:{placeholder:"请输入昵称",disabled:e.nameShow},model:{value:e.ruleForm.nickname,callback:function(t){e.$set(e.ruleForm,"nickname",t)},expression:"ruleForm.nickname"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"text"},on:{click:e.nameClick}},[e._v(e._s(e.nameShow?"编辑":"保存"))])],1)],1),a("el-form-item",{staticClass:"sign",attrs:{label:"个性签名",prop:"sign "}},[a("el-col",{attrs:{span:15}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},disabled:e.signcShow},model:{value:e.ruleForm.sign,callback:function(t){e.$set(e.ruleForm,"sign",t)},expression:"ruleForm.sign "}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"text"},on:{click:e.signcClick}},[e._v(e._s(e.signcShow?"编辑":"保存"))])],1)],1),a("el-form-item",{attrs:{label:"手机号"}},[a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{prop:""}},[a("el-select",{attrs:{disabled:e.phoneShow},model:{value:e.ruleForm.place,callback:function(t){e.$set(e.ruleForm,"place",t)},expression:"ruleForm.place"}},[a("el-option",{attrs:{label:"中国大陆",value:"86"}}),a("el-option",{attrs:{label:"中国香港",value:"852"}}),a("el-option",{attrs:{label:"中国澳门",value:"853"}})],1)],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{prop:"phone"}},[a("el-input",{attrs:{autocomplete:"off",disabled:e.phoneShow},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1)],1),a("el-col",{attrs:{span:3}},[a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"text"},on:{click:e.phoneClick}},[e._v(e._s(e.phoneShow?"编辑":"保存"))])],1)],1),a("el-form-item",{attrs:{label:"性别"}},[a("el-col",{attrs:{span:8}},[a("el-select",{staticClass:"gender",attrs:{disabled:e.genderShow},model:{value:e.ruleForm.gender,callback:function(t){e.$set(e.ruleForm,"gender",t)},expression:"ruleForm.gender"}},[a("el-option",{attrs:{label:"女",value:"女"}}),a("el-option",{attrs:{label:"男",value:"男"}})],1),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"text"},on:{click:e.genderClick}},[e._v(e._s(e.genderShow?"编辑":"保存"))])],1)],1),a("el-form-item",{attrs:{label:"生日"}},[a("el-col",{attrs:{span:8}},[a("el-date-picker",{attrs:{type:"date",disabled:e.birthdayShow},model:{value:e.ruleForm.birthday,callback:function(t){e.$set(e.ruleForm,"birthday",t)},expression:"ruleForm.birthday"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"text"},on:{click:e.birthdayClick}},[e._v(e._s(e.birthdayShow?"编辑":"保存"))])],1)],1),a("el-form-item",{attrs:{label:"行业"}},[a("el-col",{attrs:{span:15}},[a("el-input",{staticClass:"industry",attrs:{disabled:e.industryShow},model:{value:e.ruleForm.industry,callback:function(t){e.$set(e.ruleForm,"industry",t)},expression:"ruleForm.industry"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"text"},on:{click:e.industryClick}},[e._v(e._s(e.industryShow?"编辑":"保存"))])],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"学校"}},[a("el-input",{attrs:{disabled:e.schoolShow},model:{value:e.ruleForm.school,callback:function(t){e.$set(e.ruleForm,"school",t)},expression:"ruleForm.school"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"入学时间"}},[a("el-input",{attrs:{disabled:e.schoolShow},model:{value:e.ruleForm.year,callback:function(t){e.$set(e.ruleForm,"year",t)},expression:"ruleForm.year"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"专业"}},[a("el-input",{attrs:{disabled:e.schoolShow},model:{value:e.ruleForm.specialty,callback:function(t){e.$set(e.ruleForm,"specialty",t)},expression:"ruleForm.specialty"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",[a("el-checkbox",{attrs:{disabled:e.schoolShow},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("公开(对所有人可见)")])],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",[a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"text"},on:{click:e.schoolClick}},[e._v(e._s(e.schoolShow?"编辑":"保存"))])],1)],1)],1)],1)],1)])},r=[],i={data:function(){var e=this,t=function(t,s,a){""==s?a(new Error("请输入手机号")):e.isCellPhone(s)?a():a(new Error("请输入正确的手机号!"))};return{pic:"",labelPosition:"right",nameShow:!0,signcShow:!0,phoneShow:!0,genderShow:!0,birthdayShow:!0,industryShow:!0,schoolShow:!0,checked:!1,checked1:"",UserInfoList:"",Useravatar:"",ruleForm:{nickname:"",sign:"",place:"",phone:"",gender:"",birthday:"",industry:"",school:"",specialty:"",year:"",file:""},rules:{phone:[{required:!0,validator:t,trigger:"blur"}]}}},mounted:function(){this.getUserInfo()},methods:{isCellPhone:function(e){return!!/^1(3|4|5|6|7|8)\d{9}$/.test(e)},previewPic:function(e){this.file=e.target.files[0],this.avatarEdit()},getUserInfo:function(){var e=this,t=this.APIURL+"/classic/usr/user/info";this.$axios.post(t,"",{headers:{SessionKey:this.SessionKey,key:this.key}}).then((function(t){var s=t.data;"suc"==s.result&&(localStorage.setItem("userInfo",JSON.stringify(s.data)),e.$store.commit("setUserInfo",s.data),e.ruleForm.nickname=s.data.nickname,e.ruleForm.sign=s.data.sign,e.ruleForm.phone=s.data.phone,e.ruleForm.gender=s.data.gender,e.ruleForm.birthday=s.data.birthday,e.ruleForm.industry=s.data.industry,e.ruleForm.school=s.data.school.school,e.ruleForm.year=s.data.school.year,e.ruleForm.specialty=s.data.school.specialty,e.pic=s.data.avatar,e.Useravatar=s.data.avatar)}))},nameClick:function(){this.nameShow=!this.nameShow,1==this.nameShow&&this.userEdit("nickname",this.ruleForm.nickname)},signcClick:function(){this.signcShow=!this.signcShow,1==this.signcShow&&this.userEdit("sign",this.ruleForm.sign)},phoneClick:function(){this.phoneShow=!this.phoneShow,1==this.phoneShow&&this.userEdit("phone",this.ruleForm.phone)},genderClick:function(){this.genderShow=!this.genderShow,1==this.genderShow&&this.userEdit("gender",this.ruleForm.gender)},birthdayClick:function(){this.birthdayShow=!this.birthdayShow,1==this.birthdayShow&&this.userEdit("birthday",this.ruleForm.birthday)},industryClick:function(){this.industryShow=!this.industryShow,1==this.industryShow&&this.userEdit("industry",this.ruleForm.industry)},schoolClick:function(){var e=this;if(this.schoolShow=!this.schoolShow,1==this.schoolShow){var t=this.APIURL+"/classic/usr/user/edit";0==this.checked?this.checked1=0:this.checked1=1;var s=new FormData;s.append("type","school"),s.append("value[school]",this.ruleForm.school),s.append("value[specialty]",this.ruleForm.specialty),s.append("value[year]",this.ruleForm.year),s.append("value[visible]",this.checked1),this.$axios.post(t,s,{headers:{SessionKey:this.SessionKey,key:this.key}}).then((function(t){console.log(t.data),0==t.data.errorCode?e.$message({type:"success",message:"修改成功!"}):alert(t.data.msg)})).catch((function(e){}))}},avatarEdit:function(){var e=this,t=this.APIURL+"/classic/usr/user/avatar",s=new FormData;s.append("file",this.file),this.$axios.post(t,s,{headers:{SessionKey:this.SessionKey,key:this.key}}).then((function(t){console.log(t.data),0==t.data.errorCode?(e.getUserInfo(),e.$message({type:"success",message:"修改成功!"})):alert(t.data.msg)})).catch((function(e){}))},userEdit:function(e,t){var s=this,a=this.APIURL+"/classic/usr/user/edit",r={type:e,value:t};this.$axios.post(a,r,{headers:{SessionKey:this.SessionKey,key:this.key}}).then((function(e){console.log(e.data),0==e.data.errorCode?(s.getUserInfo(),s.$message({type:"success",message:"修改成功!"})):alert(e.data.msg)})).catch((function(e){}))}},computed:{UserInfo:function(e){return this.$store.state.UserInfo},SessionKey:function(){return this.$store.state.SessionKey},key:function(){return this.$store.state.key}}},o=i,l=(s("431a"),s("2877")),n=Object(l["a"])(o,a,r,!1,null,null,null);t["default"]=n.exports},"431a":function(e,t,s){"use strict";var a=s("6b09"),r=s.n(a);r.a},"4c45":function(e,t,s){e.exports=s.p+"static/img/head.ae61c4c1.png"},"6b09":function(e,t,s){}}]);
//# sourceMappingURL=chunk-b9da510a.e1933934.js.map