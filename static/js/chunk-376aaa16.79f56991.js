(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-376aaa16"],{"22b8":function(e,t,s){},"353e":function(e,t,s){"use strict";var a=s("22b8"),r=s.n(a);r.a},4037:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"link_header lightest-bg"},[e._v("收货地址")]),s("div",{staticClass:"address"},[s("div",{staticClass:"addAddress assistant-text"},[e._v("新增收货地址")]),e._m(0),s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"地址信息",prop:"add"}},[s("el-cascader",{attrs:{size:"large",options:e.options},on:{change:e.addressChange},model:{value:e.ruleForm.add,callback:function(t){e.$set(e.ruleForm,"add",t)},expression:"ruleForm.add"}})],1),s("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[s("el-col",{attrs:{span:11}},[s("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:3}},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1)],1),s("el-form-item",{attrs:{label:"邮政编码",prop:"zip"}},[s("el-col",{attrs:{span:11}},[s("el-input",{model:{value:e.ruleForm.zip,callback:function(t){e.$set(e.ruleForm,"zip",t)},expression:"ruleForm.zip"}})],1)],1),s("el-form-item",{attrs:{label:"收货人姓名",prop:"name"}},[s("el-col",{attrs:{span:11}},[s("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1)],1),s("el-form-item",{attrs:{label:"手机号",required:""}},[s("el-col",{attrs:{span:4}},[s("el-form-item",{attrs:{prop:""}},[s("el-select",{attrs:{placeholder:"中国大陆"},model:{value:e.ruleForm.iphone,callback:function(t){e.$set(e.ruleForm,"iphone",t)},expression:"ruleForm.iphone"}},[s("el-option",{attrs:{label:"中国大陆",value:"86"}}),s("el-option",{attrs:{label:"中国香港",value:"852"}}),s("el-option",{attrs:{label:"中国澳门",value:"853"}})],1)],1)],1),s("el-col",{attrs:{span:7}},[s("el-form-item",{attrs:{prop:"phone"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1)],1)],1),s("el-form-item",[s("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("设置为默认收货地址")])],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即创建")])],1)],1),s("div",{staticClass:"table"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[s("el-table-column",{attrs:{prop:"name",label:"收货人",width:"100"}}),s("el-table-column",{attrs:{prop:"province",label:"所在地区",width:"180"}}),s("el-table-column",{attrs:{prop:"address",label:"详细地址",width:"180"}}),s("el-table-column",{attrs:{prop:"zip",label:"邮编",width:"100"}}),s("el-table-column",{attrs:{prop:"phone",label:"电话/手机",width:"150"}}),s("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),s("el-button",{attrs:{size:"mini",type:"danger"},nativeOn:{click:function(s){return s.preventDefault(),e.deleteaddress(t.$index,t.row)}}},[e._v("删除")])]}}])}),s("el-table-column",{attrs:{label:"操作",width:"88"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{class:1==t.row.default?"active":e.isActive,attrs:{type:"text",size:"small"},nativeOn:{click:function(s){return s.preventDefault(),e.handclick(t.$index,t.row)}}},[e._v("设为默认")])]}}])})],1)],1),s("el-dialog",{attrs:{title:"修改收货地址",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{ref:"saveForm",staticClass:"demo-ruleForm",attrs:{model:e.saveForm,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"地址信息",prop:"add"}},[s("el-cascader",{attrs:{size:"large",options:e.options},on:{change:e.addressChange},model:{value:e.saveForm.add,callback:function(t){e.$set(e.saveForm,"add",t)},expression:"saveForm.add"}})],1),s("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[s("el-col",{attrs:{span:12}},[s("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:3}},model:{value:e.saveForm.address,callback:function(t){e.$set(e.saveForm,"address",t)},expression:"saveForm.address"}})],1)],1),s("el-form-item",{attrs:{label:"邮政编码",prop:"zip"}},[s("el-col",{attrs:{span:12}},[s("el-input",{model:{value:e.saveForm.zip,callback:function(t){e.$set(e.saveForm,"zip",t)},expression:"saveForm.zip"}})],1)],1),s("el-form-item",{attrs:{label:"收货人姓名",prop:"name"}},[s("el-col",{attrs:{span:12}},[s("el-input",{model:{value:e.saveForm.name,callback:function(t){e.$set(e.saveForm,"name",t)},expression:"saveForm.name"}})],1)],1),s("el-form-item",{attrs:{label:"手机号",required:""}},[s("el-col",{attrs:{span:5}},[s("el-form-item",{attrs:{prop:""}},[s("el-select",{attrs:{placeholder:"中国大陆"},model:{value:e.saveForm.iphone,callback:function(t){e.$set(e.saveForm,"iphone",t)},expression:"saveForm.iphone"}},[s("el-option",{attrs:{label:"中国大陆",value:"86"}}),s("el-option",{attrs:{label:"中国香港",value:"852"}}),s("el-option",{attrs:{label:"中国澳门",value:"853"}})],1)],1)],1),s("el-col",{attrs:{span:7}},[s("el-form-item",{attrs:{prop:"phone"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.saveForm.phone,callback:function(t){e.$set(e.saveForm,"phone",t)},expression:"saveForm.phone"}})],1)],1)],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.submitclick}},[e._v("确 定")])],1)],1)],1)])},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"address_id"},[s("span",{staticClass:"dark-text"},[e._v("当前配送至")]),s("span",{staticClass:"dark-text"},[e._v("中国大陆")])])}],i=(s("7f7f"),s("ef6c")),o={data:function(){var e=this,t=function(t,s,a){""==s?a(new Error("请输入手机号")):e.isCellPhone(s)?a():a(new Error("请输入正确的手机号!"))},s=function(t,s,a){""==s?a(new Error("请输入邮政编码")):e.iscellZip(s)?a():a(new Error("请输入正确的邮政编码"))};return{isShow:!1,options:i["regionData"],checked:!1,isActive:!1,dialogFormVisible:!1,id:"",default:"",ruleForm:{address:"",province:"",city:"",district:"",add:"",name:"",place:"",phone:"",zip:""},saveForm:{address:"",province:"",city:"",district:"",add:"",name:"",place:"",phone:"",zip:""},rules:{add:[{required:!0,message:"请输入收货地址",trigger:"blur"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"}],name:[{required:!0,message:"请输入收货人姓名",trigger:"blur"}],phone:[{required:!0,validator:t,trigger:"blur"}],zip:[{required:!0,validator:s,trigger:"blur"}]},tableData:[]}},mounted:function(){this.addressList()},methods:{isCellPhone:function(e){return!!/^1(3|4|5|6|7|8)\d{9}$/.test(e)},iscellZip:function(e){return!!/^[0-9]{6}$/.test(e)},addressChange:function(e){this.province=i["CodeToText"][e[0]],this.city=i["CodeToText"][e[1]],this.district=i["CodeToText"][e[2]]},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;0==t.checked?t.default=0:t.default=1,t.saveaddress()}))},handleEdit:function(e,t){this.dialogFormVisible=!0,this.saveForm=t,this.saveForm.add=i["TextToCode"][t.province][t.city][t.district].code,this.id=t.id},submitclick:function(){var e=this;this.dialogFormVisible=!1;var t=this.APIURL+"/classic/usr/address/save",s={name:this.saveForm.name,phone:this.saveForm.phone,province:this.saveForm.province,city:this.saveForm.city,district:this.saveForm.district,address:this.saveForm.address,default:this.default,id:this.id};this.$axios.post(t,s,{headers:{SessionKey:this.SessionKey,key:this.key}}).then((function(t){0==t.data.errorCode?(e.$message({type:"success",message:"修改成功!"}),e.addressList()):alert(t.data.msg)})).catch((function(e){}))},addressList:function(){var e=this,t=this.APIURL+"/classic/usr/address/all";this.$axios.post(t,"",{headers:{SessionKey:this.SessionKey,key:this.key}}).then((function(t){e.tableData=t.data.data})).catch((function(e){}))},saveaddress:function(){var e=this,t=this.APIURL+"/classic/usr/address/save",s={name:this.ruleForm.name,phone:this.ruleForm.phone,province:this.province,city:this.city,district:this.district,address:this.ruleForm.address,default:this.default};this.$axios.post(t,s,{headers:{SessionKey:this.SessionKey,key:this.key}}).then((function(t){0==t.data.errorCode?e.addressList():alert(t.data.msg)})).catch((function(e){}))},deleteaddress:function(e,t){var s=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=s.APIURL+"/classic/usr/address/delete";s.$axios.post(e,{id:t.id},{headers:{SessionKey:s.SessionKey,key:s.key}}).then((function(e){0==e.data.errorCode?(s.$message({type:"success",message:"删除成功!"}),s.addressList()):alert(e.data.msg)})).catch((function(e){}))})).catch((function(){}))},handclick:function(e,t){var s=this,a=this.APIURL+"/classic/usr/address/save",r={name:t.name,phone:t.phone,province:t.province,city:t.city,district:t.district,address:t.address,default:1,id:t.id};this.$axios.post(a,r,{headers:{SessionKey:this.SessionKey,key:this.key}}).then((function(e){0==e.data.errorCode?s.addressList():alert(e.data.msg)})).catch((function(e){}))}},computed:{SessionKey:function(){return this.$store.state.SessionKey},key:function(){return this.$store.state.key}},components:{}},l=o,n=(s("353e"),s("2877")),c=Object(n["a"])(l,a,r,!1,null,null,null);t["default"]=c.exports},"7f7f":function(e,t,s){var a=s("86cc").f,r=Function.prototype,i=/^\s*function ([^ (]*)/,o="name";o in r||s("9e1e")&&a(r,o,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-376aaa16.79f56991.js.map